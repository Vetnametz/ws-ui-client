<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="connect-src * 'unsafe-inline';">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <link rel="stylesheet" href="../scss/main.css">
    <script src="https://cdn.socket.io/socket.io-3.0.1.min.js"></script>
    <script src="https://unpkg.com/ejs@3.1.3/ejs.min.js"></script>

    <script src="../js/ioClient.js"></script>

    <script id="template" type="text/template">

      <div class="screen orientation<%= orientation %>">
        <header>

          <div class="ip-address">
            <span><%= ip %></span>
          </div>

          <ul class="icons-list">

            <% switch (connection) {
            case 'Ethernet' : %>
            <li>
              <i class="flaticon-ethernet"></i>
            </li>
            <% break;

            case 'USB' : %>
            <li>
              <i class="flaticon-usb"></i>
            </li>
            <% break;

            case 'WiFi' : %>
            <li>
              <i class="flaticon-wifi"></i>
            </li>
            <% break;

            } %>

          </ul>

        </header>

        <div class="name-date-row">
          <div class="name-block"><%= friendlyName %></div>
          <div class="date-block">
            <%=  new Date().toLocaleTimeString()  %>
          </div>
        </div>

        <div class="state-row">

          <div class="process-state">

            <% switch (state) {
            case 'Cooling' : %>
            <div class="wrapper">
              <div class="icon">
                <i class="flaticon-thermometer"></i>
              </div>
            </div>

            <div class="name">Cooling: <span> <%= sensorTemperature %> Â°C</span></div>
            <% break;

            case 'not_ready' : %>
            <div class="wrapper">
              <div class="icon">
                <span class="icon-Asset-1 icon-not-ready"><span class="path1"></span><span class="path2"></span><span class="path3"></span><span class="path4"></span></span>
              </div>
            </div>

            <div class="name">Not Ready</div>
            <% break;

            case 'working' : %>
            <div class="wrapper wrapper-working">
              <div class="exp-detail">
                <div class="exp">
                  <div class="value"><%= experiment %></div>
                </div>
                <div class="time-remaining">
                  <p class="label">Time Remaining: <%= new Date(expTimeRemaining).toLocaleTimeString() %></p>
                </div>
                <p>Experiment in Progress...</p>
              </div>
            </div>
            <% break;

            case 'Ready' : %>
            <div class="wrapper">


              <div class="icon">
                <i class="flaticon-check-mark"></i>
              </div>
            </div>

            <div class="name">Ready</div>
            <% break;

            } %>

          </div>

        </div>

        <footer>
          <div class="left-icon-block">
            <span class="icon-Asset-3 icon-probe"></span>
            <span class="icon-Asset-5 icon-door"></span>
            <span class="icon-Asset-7 icon-key"></span>
          </div>

          <div class="righ-icon-block">
            <span class="icon-laser"></span>
          </div>
        </footer>
      </div>
    </script>

    <style>
        table {
            border: 2px solid black;
        }

        input {
            width: 300px;
        }

        select {
            width: 300px;
        }

        textarea {
            width: 513px;
            border: 2px solid black;
        }

        #btnConnect {
            width: 100px;
        }

        #btnDisconnect {
            width: 100px;
        }

        #btnSend {
            width: 100px;
        }
    </style>
</head>

<body>
    <div id="output"></div>
</body>

<script>
    openWSConnection('ws', 'localhost', '8383', '');
</script>
</html>
